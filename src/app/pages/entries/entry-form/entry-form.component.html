<nav class='mb-5'>
  <ol class='breadcrumb'>
    <li class='breadcrumb-item'><a routerLink='/'>Home</a></li>
    <li class='breadcrumb-item'><a routerLink='/entries'>Lançamentos</a></li>
    <li class='breadcrumb-item active'>{{pageTitle}}</li>
  </ol>
</nav>

<div class='row mb-3'>
  <div class='col-md'>
    <h1 class='h2 border-left pl-2'>{{ pageTitle }}</h1>
  </div>
  <div class='col-md'>
    <a class='btn btn-light float-right' routerLink='/entries'><< Voltar</a>
  </div>
</div>

<div class='alert alert-danger' *ngIf='serverErrorMessages'>
  <strong>Erro no Servidor</strong>
  <ul>
    <li *ngFor='let error of serverErrorMessages'>{{ error }}</li>
  </ul>
</div>

<form [formGroup]='entryForm' (submit)='submitForm()'>
  <div class='card'>
    <div class='card-header'>Informações sobre o lançamento</div>
    <div class='card-body'>
      <div class='form-row'>
        <!-- type -->
        <div class='form-group col-md-2'>
          <label for='type'>Tipo</label>
          <select name='type' id='type' class='form-control' formControlName='type'>
            <option value='expense'>Despesa</option>
            <option value='revenue'>Receita</option>
          </select>
          <!--<input type='text' class='form-control' id='type' formControlName='name'>-->
          <div class='text-danger' *ngIf='entryForm.get("name").invalid && entryForm.get("name").touched'>
            <div *ngIf='entryForm.get("name").errors.required'>dado obrigatório</div>
          </div>
        </div>

        <!-- name -->
        <div class='form-group col-md-5'>
          <label for='name'>Lançamento</label>
          <input type='text' class='form-control' id='name' formControlName='name'>
          <div class='text-danger' *ngIf='entryForm.get("name").invalid && entryForm.get("name").touched'>
            <div *ngIf='entryForm.get("name").errors.required'>dado obrigatório</div>
            <div *ngIf='entryForm.get("name").errors.minlength'>deve conter pelo menos 2 caracteres</div>
          </div>
        </div>

        <!-- name -->
        <div class='form-group col-md-5'>
          <label for='amount'>Valor</label>
          <div class='input-group'>
            <div class='input-group-prepend'>
              <div class='input-group-text'>R$</div>
            </div>
            <input type='text' [imask]='imaskConfigAmount' class='form-control' id='amount' formControlName='amount'>
          </div>
          <div class='text-danger' *ngIf='entryForm.get("name").invalid && entryForm.get("name").touched'>
            <div *ngIf='entryForm.get("name").errors.required'>dado obrigatório</div>
            <div *ngIf='entryForm.get("name").errors.minlength'>deve conter pelo menos 2 caracteres</div>
          </div>
        </div>

      </div>

      <div class='form-row'>

        <!-- description -->
        <div class='form-group col-md-8'>
          <label for='description'>Descrição</label>
          <input type='text' class='form-control' id='description' formControlName='description'>
        </div>
      </div>
    </div>

    <div class='card-footer'>
      <button [disabled]='submittingForm || entryForm.invalid' type='submit' class='btn btn-primary btn-lg'>
        salvar
      </button>
    </div>
  </div>
</form>
